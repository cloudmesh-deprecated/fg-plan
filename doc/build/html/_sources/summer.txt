.. sectnum::



Plan: Cloudmesh Service Shift
======================================================================

.. contents:: Table of Content

Project Objectives
-------------------

Currently the FG RAIN service contains a service shift mechanism. We
like to further develop this mechnism by introducing an abstraction for bare
metal provisioning so that teefaa as well as OpenStack bare metal
provisioning can be used.  Services we target are Eucalyptus,
OpenStack, and HPC via SLURM (or Moab).

Development Objectives
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

#. Develop a service that allows the reassignment of servers in a cluster to be used either as part of an HPC or  Cloud IaaS farmework. 
#. Make the service as much as possible independent through abstractions from services such as XCAT and Moab (which is currently not the case)
#. provide a simple Web based GUI for administrators to the service shift functionality

Production Objectives
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

#. Verify what is in production and what is not
#. Continue the ongoing production of FG Move (it is unclear if it still in production) 
#. Clarify the position of Teefaa in the production software
#. Introduce the new developments intop production
#. Reuse DevOps as part of the development and production efforts

Project Deliverables
-------------------

Evolution of the Project
----------------------

The use of the outdated Moab and XCAT tools used in our production
environment to support FG RAIN makes it necessary to generalize the
approach to become independent from thes efforts. An important aspect
of this is the bare metal provisioning. New tools and services have
become recently available for example through OpenStack bare metal 
distributed in Grizzly that it is imperative to integrate such tools
into our solution and pproduction strategy. As such tools could evolve
we hope to provide a simple abstraction on top of bare metal
provsiioning that makes it easier for us to integrate with future
efforts. Furthermore, we hopw to leverage from existiong DevOps
frameworks to simplify development and reduce the time for deployment.

Refernce Materials
------------------

FG Move:
    http://futuregrid.github.io/rain-move/

FG Rain:
    http://futuregrid.github.io/rain/

Teefaa:
    http://futuregrid.github.io/teefaa/

Inventory:
    http://futuregrid.github.io/inventory
    https://github.com/futuregrid/inventory

Flask_cm:
    http://futuregrid.github.io/flask_cm
    https://github.com/futuregrid/flask_cm


Definitions and Acronyms
-------------------------------

FG Rain (in production?):
   FutureGrid Rain is a tool that will allow users to place customized
   environments like virtual clusters or IaaS frameworks onto
   resources. The process of raining goes beyond the services offered
   by existing scheduling tools due to its higher-level toolset
   targeting virtualized and non-virtualized resources. Rain will be
   able to move resources from one infrastructure to another and
   compare the execution of an experiment in the different supported
   infrastructures.

FG Move (in production?):  
   is a service that enables physical resources re-allocation among
   infrastructures. By using a simple command line interface, this
   service is able to de-register a machine from a particular
   infrastructure and register it in another one. Internally, this
   service makes use of Teefaa to dynamically provision the selected
   machine with the OS and software needed for a successful
   registration in the new infrastructure. FG Move also maintains a
   database with information about the machines composing each one of
   the different infrastructures. The database can be consulted to
   obtain detailed information about a particular infrastructure.

Teefaa: 
    (to be verified) The definition of what teefaa is has been
    changing over time thus we need as part of this plan to identify
    more clearly what it is. We have three different versions of
    Teefaa that are currently used and/or developed.

Teefaa 1 (in production?):
     In the first version of teefaa the focus was layed on bare metal
     provisioning of the OS while utilizing the scheduling system. As
     we wanted to be independent from XCAT and MOAB this was achieved
     by integrating it into TORQUE. Teefaa is used as part of FG Move.

Teefaa 2 (status unclear):
     Teefaa was enhanced to integrate a mechnism for developing an
     image on a local laptop so that the image can than be snapshotted
     and placed onto a cluster so that bare metal provisioning can be
     achieved from this image. Gregor believes from conversation that
     this has been used and or is installed in some fashion on India.

Teefaa 3 (status unclear):
      Much of Teefaa 2 was developed mostly in shell, some aspects of
      it are developed better in python. Teefaa 3 provides an attempt
      to deliver a mostly python based implementation.
     
Cloudmesh Inventory: 
      FG Move contains a simple inventory that is not suffcient to
      deal with all of our needs. Cloudmesh inventory separates the
      code base from FG move to make it independent and adds new
      features to it.

Cloudmesh Service Shift:
      Currently the FG RAIN service contains a service shift
      mechanism. We like to redevelop this mechnism by introducing an
      abstraction for bare metal provisioning so that teefaa as well
      as OpenStack bare metal provisioning can be used.
      Services we target are Eucalyptus, OpenSTack, and HPC via SLURM
      (or Moab).

      	  

